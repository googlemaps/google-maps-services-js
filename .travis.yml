language: node_js
node_js:
- node
- 8
script:
- npm test
- codecov
env:
  global:
  - secure: ZTVv7iYQ4PK13kwxKcfNYvaI+kWguRHYSY0mJeiFbbrqt1haRbCddkcloXYMf5C5MhOT8YYDTu52LufkUdfL0fMNBoWK6OHxjyoGYAydDUx+K7sUYQOwHgIjYnvKtf9O42WYk6DeguKjcOox25zlUb53QprTORp2vwqaRQgw8Dt59lGMTDhtkiOZd++maTg5zXlteys5R74b+prEgAS0xZ6TghOat6QrzWEDzTUAiIpLcPv5lCo513zN52c2/CKXjnBWyCD9rIgzP0Xll7pGVWikgXITIijeS7LSfayMHekBykVX6QDy1vZiU1KftMVwT2tAfhd6j7uzWknW/M/TMSKifqstrDQtBcQouWGgMBObxXzBZr6d3VPSkwgaeyc91fTDsy10ETzUOsQF0yywLpApjlTxQDpqPDoLMF/VuephNs4sxjoALBNM5MJ6ccMtLut8VvfmWWOghaRZLg2I0QmFWEgbecFPCkAdH4wlM91yu8+JnN+ROHGQulQ646IjABy/TF03GUxY0986vkUpJrXNRtWU6kPId5h2CAm+Yu9M5uBmQPbHxzW0lnEORQmxKUm6uZm+tkoIc5U54SuQgn8yxljTgRR0Jj5cy6JObkeDiznGnwYwQLCkog0YNFElcwv9yhc9+dKP6D6yoDiBjH1anRzRjdhLqmZi8S4mtQ0=
  - secure: LG77D92hkR3WO6STGsrNiYWbUOXwZ7wL6LPEoeRZxi/V1eRoYgbRIX9KS+s9jJuYOMnyER40YJ8N1ssBTo6XRn+q7sC/xV6HkxbnLmEJWYT7hETwJKH1vm4F7X8siPaKHxPP8nfMjiW4mE5QQUeKiGeYB9rQv5nPGdo1tXf8MDZ2fVzEqL9/HYZixhArx9y19ofNaBz+CZJEoXL8q+8idPbsE6E80BVJR8o3X7XXlnvK0RvTE7EhpA+yloomhp0VsANeaTwV1v6MMMoNM1ax4P6AQckAUr3ybPln/q8UJFcLA6Hx4m9CYfDG6jWT1lVNlZ6c8253mTKmJ1nK0aX9BEFkyWBGYWK+6dioLomJuXA2fZ8eoqrWnpsKdaOSRZM54BEzMl7hIjMHTnbSzIUmEoBZ7vb2sB4eChLRkZdfQ8kKPoXmWM0eGTvnwOUEnGPZRVeoDRcDP9+DNV3H8Ye+k56KiCeN8hVeUrHnkDGhHVRZsoGIJ3Bn0gFlTTITY72hr67pa8CVxDx2BWe0lzYA9d6RGinLO/JBd+I+Su2bhxVdvLmvS9wTAF9thELo+xuckLEIXvpaOea9KkIGaekp5cUXobfCPwRwvNwcBRu0Kc3jgMdZpcfFtGvPUkr1iOjvHEnuTx0RTm1dUHdLazBCqcLoQFjivEVrFSoof+fYdo0=
  - secure: gaLDy4vAQD/m38WDPWQ/fCF1RBvZ0EFtOfRxAFc+gL3Gnl/757sgTzpHB60B2ij0pEp5+xc0iCCf/LwBZVW5aQyOKvN0ApQ+m6A+Ter+6j2UIVTK6jLJVgcRD4zTcvLewp7Laf2ciE70yqGyOS04VvjmUEkWJrbjRZBDsrL1EiJRY0+Z1oRTzz3KMjl9CHjdzY57m3vcFBzUAIGWfPecQviTKQONKUT+KJklcB38k53BknH/H2dn6XG1sr2R7Lzc0YvdoGkSPAcab1+FNo51Wmtg4CPe/xFqg4Y1nCjUjBxqrhq7g02KMUAEBdLze6FS1o50eFba2yIfscUhwR2ZO6x4efc22d8q8u80bKMLfLdVsXUaA6Kp0l5vHvRB4ly0sHl44VLjXsrfpg+WqWIOQA2b/L7fHEYjG/U5OG2p4op28O/QCyZfc5WXUjbE49gwa6LmkqmYBO5hvHaPlNvyLF6PLHgaumTZVLN5UZkHmCzOKdN2Wivq3mB/VwvrJFUPhQs8QZ8PdQ1PGIA9SX6r/tcWq+DV8JAX9BJTXeEIvlUncR0FkapVp8Qx7ty9XvETECUbZL12B9YIdd4bN8/8uuGCXhA/TYs9h1eO4creJtaV56FYrOYuwHZyuN54TdzjxYrOqQrZfTo52rD2ZXiJLzqHaxncXzFaY880+XlUugw=
  - secure: Och9j0/4PIqp5G10tuy9vlGOo8BPmwRMed8qCJS8yj9MuSjrj1aX+MpCDrIaTCDPRdabQtUYEkMKpGrns2nNDchdFy534Gh92ZS9c8ErFVjn/0xhS1ybMtoQK4QhkfKIihrWyZaqQxVOR2pE1Hs6XkBVZs6t7l1uqEmJOKxqVVhsZA3CimJH1dqOhr4SEwIA+8DECDxfaLSbmL+2q2JnRT7+JwrfsIxFv3UCXZBi55rQbTEL/ZJoLzeTi53LZNdh+/arWH0izPAx374uVqOhLyvSqudzWwgiOwX7Y5BKr8AjBTSvxwUWE0Umo8mjR2Sk5OGMIWp+thuMMtxA/n1OZcZ/zsp2zGIb10UtPNPvNZYVuDhlQLSxtpM9uPyuJBkjt66aX6wfujiGDsl7W64I1dFVN1u6f0iFtD15t5+aCUeWY7NlshSvvqnpYbcjCHjS+g2ehsqToVwYrM91lXcaC1iZDjMARGds6gQUzr0HIKvL6C+EBlN9tVDHRsmlJ6PgR2h4IrMQBxCG28Y7R3GNWRkA//8BRLnTAkfG0CpLJOO8WfWSf5XZz835wd6GfY0z+JR6ogkLGMSWYT0oamnx5sXyVqu5Y6LqabYMZxT67xVHVkUnJV7l8HaqgY1v/cGMXlamXT/WgaJnis3xsAaOl0O/Ego27bmfXuA3tGd0Cqw=
  - secure: lbD8kCttnjhyjTNBz0a3HdFpwszX/p6qBoUHL2/VZkp4EeceP2H9zVD+kpOHStQB4KuC13QpCzp/HSjY/ipicbUTvJENSstx1bR3jtuogNiC9D4XUSAyL2M6soNrFzSfwuOrDAjNqdJo8N/NeGExw9hZhNJRxE/Os31af18h/uMfusNPPXqk2IxPxPwHkizf6OR+jT0m6CWOVWayWYrUejX5k24ZiuAVlPAvHxNql/4Yz1YI0LdQw0xVI6dBwPfpR9Jq58uttIwGshI+IdhXfDXU0IFJFMKxz5xN0k0e3zBvfFU7TzvncZvuKqjiBlS6SyqFFYet3NMMsiY49peJ4eo+6xBplqWlPy7+/Rw11LZiYqViecVPeUMMDz1etltdhajIjAMtH0kVeEzA+RkSO0vxbKd9vmbShsup41oSlAoJAcuKHatKZPyitMuzAgB9YX8THuBNOk02eoVnjKC2oIU+xf/NtxxcvqN0zy7UwcOROv/v1CgaN1kXqe/vLOSR2w7LisHkbGh1TrtmBsMnnbMUO9I1s4UfS9adawWspDVipIyhx21ZEay/la6K82TUVHFadYkkSUJJWcboJsOMgeHqQjCDdUM2mFhXVQ+8BUjcUmYvsjrZVCWlIVE2myuPBc0M/NCNqrjx4xy/u/5YSBA+0QkEslc6ZhzUc/9geOQ=
  - secure: hZOQNMDjqX5N4ngV36uKiKjnCR2Cyc6yffkWcME+K+M/hbIBMoQJmTqV7aL+FG5tUI6KABYedBaMWb0zmvDnA45HX/zPDdRp5ZmXPW67t8gwmYKDHd+nCOL4sIkGCVsWHSD+ajiDDexGyDh2Y39W11k1O324yCMWbtEUllimIzA9CU4IBuor4QuSf7OEntolftI0DEDA40pI2L1pf0Ptoz8x8pV7UzDk3I4de3Y8zgO77GsiQCuJM0DdNL6yVnSJVqn+EbjP8fZI6nB1DmFifCUv10WCtfjD55w2Lz4LsW6LGITY3A1MjPZBFriaAhTyfZBrCMRZaU8UV+1WJfX7erlqmhXce5EQDE/HhH1Sbz8B/uLtupj+TdEqhafka4gbJuEBIY4GT6Xvb4pDnyrmsbKpZUR7vcCV5pEEWwLMH6FUBnEzI1VDpnrtu89C0TrO3UC++0gwgoI8ACNgxmTPY+SLgkaAXxuurajji+k/5V7gL+2+ycpf/q1cywoop4tWlgGdaCCtA1gz2+bFMVkhMQWlGXq2TZQnEeUybX6eaetto9kwNodMAV/Oqkz1P1nY8X7L2OE5UNxVQONrOTFFfO+V2bItKseQ7ouoPyIJd67Vg8HDvazh4fEn3SeJI50Okl+8mHjdOOkQEzzVwu6TrEEFtWJG8W+T+EZkGGOlIdE=
jobs:
  include:
  - stage: test
    node_js: lts/*
    if: fork = false
    script:
    - npm run test:e2e
  - stage: release
    node_js: lts/*
    if: branch = master AND type = push AND fork = false
    deploy:
      provider: script
      skip_cleanup: true
      script:
      - npx semantic-release
